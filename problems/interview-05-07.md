# 面试题 05.07. 配对交换

## 题目描述

这是LeetCode上的[面试题 05.07. 配对交换](https://leetcode-cn.com/problems/exchange-lcci/)，难度为简单。



编写程序，交换某个整数的奇数位和偶数位，尽量使用较少的指令（也就是说，位0与位1交换，位2与位3交换，以此类推）。



### 示例1

```
 输入：num = 2（或者0b10）
 输出 1 (或者 0b01)
```



### 示例2

```
 输入：num = 3
 输出：3
```



### 数据范围

- `num`的范围在$[0, 2^{30} - 1]$之间，不会发生整数溢出。

  

***



## 解答

### 1. 用特定数提取奇偶位

感觉这道题更像脑筋急转弯。考虑提取一个数的奇数位，例如$n=(1011\ 0100)_2$, 我们可以把它跟$(0101\ 0101)_2$做与运算，那么

得到的结果就是将原数奇数位为1的位置设成1，偶数位都是0。反过来，提取一个数的偶数位，就是跟$(1010\ 1010)_2$做与运算。

那么最后怎么交换这两个位置？我们把奇数位得到的结果左移，偶数位得到的结果右移，二者做逻辑或运算就可以了。注意奇数位最高位是0，所以左移也不会溢出，如果左移偶数位的结果，可能导致溢出。

那么对于32位整数，提取奇数位应该用$(0101\ 0101\ 0101\ 0101\ 0101\ 0101\ 0101\ 0101)_2={\tt 0x5555\ 5555}$，提取偶数位应该用$(1010\ 1010\ 1010\ 1010\ 1010\ 1010\ 1010\ 1010)={\tt 0xAAAA\ AAAA}$.



#### **java版：**

```Java
class Solution {
    public int exchangeBits(int num) {
        // 注意位运算的优先级，要多加括号啊！
        return (((num & 0x55555555) << 1) | ((num & 0xAAAAAAAA) >> 1));
    }
}
```

#### **C++版：**

```cpp
class Solution {
public:
    int exchangeBits(int num) {
        // 注意位运算的优先级，要多加括号啊！
        return (((num & 0x55555555) << 1) | ((num & 0xAAAAAAAA) >> 1));
    }
};
```

#### Python3版：

```python
class Solution:
    def exchangeBits(self, num: int) -> int:
        # 注意位运算的优先级，要多加括号啊！
        return (((num & 0x55555555) << 1) | ((num & 0xAAAAAAAA) >> 1))
```



* 时间复杂度$O(1)$, 空间复杂度$O(1)$.





